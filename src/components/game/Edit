import React from "react";
import {getDomain} from "../../helpers/getDomain";

class Edit extends React.Component {
    constructor() {
        super();
        this.state = {
            user: null
        };
        fetch(`${getDomain()}/users` + localStorage.id.toString(), {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        }
            .then(response => response.json())
            .then(async user => {
       //         await new Promise(resolve => setTimeout(resolve, 800));
                this.setState({user});
                console.log(user);
            })
            .catch(err => {
                console.log(err);
                alert("Something went wrong")
            })
        );
    }

    componentDidMount() {
        console.log("edit mounted");
    }

    save() {
        fetch(`${getDomain()}/users` + localStorage.id.toString(), {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                username: this.state.user.username,
                status: this.state.user.status,
                dateOfCreation: this.state.user.dateOfCreation,
                dateOfBirth: this.state.user.dateOfBirth
            })
        })
            .then(response => response.json())
            .then(async user => {
                await new Promise(resolve => setTimeout(resolve, 800));
                this.setState({user});
            })
            .catch(err => {
                console.log(err);
                alert("Something went wrong")
            })
    }
    render() {
        return (
            <div>hello</div>
        );
    }
}

export default withRouter(Edit);